(function(e){function t(t){for(var s,a,o=t[0],c=t[1],l=t[2],d=0,h=[];d<o.length;d++)a=o[d],i[a]&&h.push(i[a][0]),i[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(s=!1)}s&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},i={app:0},r=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var s=n("64a9"),i=n.n(s);i.a},"09a2":function(e,t,n){},"1bad":function(e,t,n){"use strict";var s=n("810b"),i=n.n(s);i.a},"1cc3":function(e,t,n){"use strict";var s=n("5f0e"),i=n.n(s);i.a},"2cc5":function(e,t,n){"use strict";var s=n("803a"),i=n.n(s);i.a},"3cb7":function(e,t,n){e.exports=n.p+"img/mystic-rose.9e413406.png"},"4def":function(e,t,n){e.exports=n.p+"media/wind.55f1a8c0.ogg"},"56d7":function(e,t,n){"use strict";n.r(t);var s=n("2b0e"),i=n("8c4f"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[e.webaudioShieldAccepted?s("RouterView"):e._e(),s("div",{attrs:{id:"sm"}},[e._m(0),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5),s("RouterLink",{attrs:{to:"/prime16"}},[s("img",{attrs:{alt:"Looper",src:"/img/looper.png"}})])],1),s("Transition",{attrs:{name:"fade"}},[e.webaudioShieldAccepted?e._e():s("div",{staticClass:"web-audio-shield"},[s("button",{attrs:{"aria-label":"Begin",title:"Begin"},on:{click:e.clickBegin}},[s("img",{staticClass:"invert",attrs:{src:n("3cb7"),alt:"Mystic Rose"}})])])])],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://www.youtube.com/channel/UChvIb5lU1CswBTno6BCGG4Q",target:"_blank",rel:"noopener noreferrer"}},[n("img",{attrs:{alt:"YouTube",src:"/img/yt.png"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://www.facebook.com/gesceap/",target:"_blank",rel:"noopener noreferrer"}},[n("img",{attrs:{alt:"Facebook",src:"/img/fb.png"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://twitter.com/gesceap_",target:"_blank",rel:"noopener noreferrer"}},[n("img",{attrs:{alt:"Twitter",src:"/img/tw.png"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://gesceap.bandcamp.com",target:"_blank",rel:"noopener noreferrer"}},[n("img",{attrs:{alt:"Bandcamp",src:"/img/bc.png"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://github.com/gesceap",target:"_blank",rel:"noopener noreferrer"}},[n("img",{attrs:{alt:"GitHub",src:"/img/gh.png"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://soundcloud.com/gesceap",target:"_blank",rel:"noopener noreferrer"}},[n("img",{attrs:{alt:"SoundCloud",src:"/img/sc.png"}})])}],o={created(){console.log("%c2xAA (https://wray.pro)","background-image: linear-gradient(to left, #c30083, #0623c8); color: #ffffff; padding: 5px 20px;")},data(){return{webaudioShieldAccepted:!1}},methods:{clickBegin(){this.webaudioShieldAccepted=!0}}},c=o,l=(n("034f"),n("2877")),u=Object(l["a"])(c,r,a,!1,null,null,null),d=u.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("audio",{ref:"wind",attrs:{preload:"",autoplay:"",loop:""}},[s("source",{attrs:{src:n("a817"),type:"audio/mpeg"}}),s("source",{attrs:{src:n("4def"),type:"audio/ogg"}})]),s("audio",{ref:"track",attrs:{preload:""},on:{ended:e.trackEnded}},[s("source",{attrs:{src:n("7a11"),type:"audio/mp3"}}),s("source",{attrs:{src:n("97f4"),type:"audio/ogg"}})]),s("div",{staticClass:"background-container"},[s("video",{attrs:{src:n("e81c"),autoplay:"",loop:"",muted:"",preload:""},domProps:{muted:!0}})]),s("div",{staticClass:"foreground-container"},[s("button",{attrs:{"aria-label":"Play/Pause"},on:{click:e.clickRose}},[s("img",{attrs:{src:n("3cb7"),alt:"Mystic Rose"}})])])])},p=[],m={data(){return{trackPlaying:!1,prime16Timer:null,webaudioShieldAccepted:!1}},methods:{clickBegin(){this.webaudioShieldAccepted=!0},async clickRose(){this.trackPlaying=!this.trackPlaying,this.trackPlaying?(await this.$refs.wind.pause(),await this.$refs.track.play(),this.prime16Timer&&(clearTimeout(this.prime16Timer),this.prime16Timer=null)):(await this.$refs.wind.play(),await this.$refs.track.pause())},async trackEnded(){this.$refs.track.currentTime=0,this.clickRose(),setTimeout(()=>{this.$router.push("/prime16")},5e3)}}},f=m,g=(n("a8a9"),Object(l["a"])(f,h,p,!1,null,null,null)),y=g.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Looper")],1)},b=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[e.loaded?n("Background",{attrs:{playing:e.playing,sources:e.sources,"stop-animating":e.stopAnimating}}):e._e(),e.loaded?n("div",{staticClass:"square"},[n("div",{staticClass:"looper"},e._l(e.showSources,function(t,s){return n("Sample",{key:t.filename,attrs:{source:t,playing:e.playing.find(function(e){return e.filename===t.filename}),queuedIn:e.playing.length&&e.startQueue.indexOf(s)>-1,queuedOut:e.endQueue.indexOf(s)>-1},on:{sampleClick:e.queueSample}})}),1)]):n("div",{staticClass:"loading"},[e._v("Loading 19.2MB please wait")])],1)},x=[],S=n("e295"),k=n.n(S),_=n("1fc0"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("canvas",{ref:"canvas"})},P=[],A=n("c9a3"),I=n.n(A);const $=new s["a"];function O(e,t,n,s,i,r,a,o){const c=t,l=2*Math.PI/n,u=r*Math.cos(l*c)+s,d=r*Math.sin(l*c)+i;return o&&(e.beginPath(),e.arc(u,d,a,0,2*Math.PI),e.fill()),[u,d]}function T({context:e,numPoints:t,width:n,height:s,dpr:i}){e.fillStyle="#fff",e.strokeStyle="#fff",e.lineWidth=1*i;const r=[];for(let a=0;a<t;a+=1)r.push(O(e,a,t,n/2,s/2,n/2,2*i,!1));for(let a=0;a<r.length;a+=1){const t=r[a][0],n=r[a][1];for(let s=0;s<r.length;s+=1){const i=r[s][0],a=r[s][1];e.beginPath(),e.moveTo(t,n),e.lineTo(i,a),e.stroke()}}}const E=10.5,q=20,M={},N=16;for(let Pe=0;Pe<N;++Pe)M[Pe]={draw:({context:e,delta:t,x:n,y:s,squareSize:i,dpr:r,features:{energy:a},stopAnimating:o})=>{let c,l;e.save(),o?(e.translate(n+E,s+E),c=i-q,l=i-q):(e.translate(n+E-a,s+E-a),c=i-q+2*a,l=i-q+2*a),T({delta:t,context:e,width:c,height:l,dpr:r,numPoints:2+Pe}),e.restore()}};var B=M,j={props:["sources","playing","stopAnimating"],data(){return{context:null,raf:null,dpr:1,squareSize:135,marginSize:2,maxSize:546,fill:"rgba(0,0,0,0)",animations:B,tick:!1,noise:null}},mounted(){const{canvas:e}=this.$refs;this.context=e.getContext("2d"),window.addEventListener("resize",this.resize),this.resize(),$.$on("loop",e=>{e%2===0?(this.fill="lime",this.tick=!0):this.tick=!1}),this.noise=new I.a("prime16"+Date.now()),this.raf=requestAnimationFrame(this.loop)},methods:{loop(e){this.raf=requestAnimationFrame(this.loop);const{dpr:t,context:n,maxSize:s,squareSize:i,marginSize:r,tick:a,noise:o,stopAnimating:c}=this,{canvas:l}=n,{width:u,height:d}=l,h=e/2;c||n.drawImage(l,-8,-8,u+16,d+16);const p=o.noise2D(h/500,h/1064);c||n.drawImage(l,p,10*Math.sin(h/5e3+5*Math.sin(p/500))-Math.cos(h/500),u+20*p+Math.sin(h/500),d+20*Math.cos(p/600+2*Math.sin(h/500))),n.fillStyle="rgba(0,0,0,0.5)",n.fillRect(0,0,u,d);let m=-1;n.fillStyle=this.fill;for(let f=0;f<16;f++){const e=this.playing.findIndex(e=>e.index===f);if(f%4===0&&m++,e<0)continue;const o=this.sources[f].analyser&&this.sources[f].analyser.get(),p=u/2-s*t/2+(i*t*(f%4)+r*t*(f%4)),g=d/2-s*t/2+(i*t*m+r*t*m);this.animations[f]?(n.save(),this.animations[f].draw({canvas:l,context:n,delta:h,x:p,y:g,squareSize:i,tick:a,dpr:t,features:o,stopAnimating:c}),n.restore()):n.fillRect(p,g,i*t,i*t)}this.fill="rgba(0,0,0,0)"},resize(){const{canvas:e}=this.$refs,{innerWidth:t,innerHeight:n}=window,{dpr:s}=this;this.squareSize=document.querySelector(".sample").clientWidth,this.maxSize=document.querySelector(".looper").clientWidth,e.width=t*s,e.height=n*s,e.style.width=`${t}px`,e.style.height=`${n}px`}}},L=j,R=(n("1cc3"),Object(l["a"])(L,C,P,!1,null,"0d565b89",null)),W=R.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:{sample:!0,playing:e.playingClass,queuedIn:e.queuedInClass,queuedOut:e.queuedOutClass},attrs:{name:e.source.name},on:{click:e.emitClick}})},D=[],G={props:["source","playing","queuedIn","queuedOut"],data(){return{playingClass:!1,queuedInClass:!1,queuedOutClass:!1}},created(){$.$on("loop",this.handleClasses)},methods:{emitClick(){this.$emit("sampleClick",this.source),this.handleClasses()},handleClasses(e=0){const{playing:t,queuedIn:n,queuedOut:s}=this;this.playingClass=!1,this.queuedInClass=!1,this.queuedOutClass=!1,e%2===0&&(this.playingClass=!!t),this.queuedInClass=!!n,this.queuedOutClass=!!s}}},U=G,Q=(n("1bad"),Object(l["a"])(U,z,D,!1,null,"a2322aac",null)),F=Q.exports;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,window.audioContext=new window.AudioContext}catch(Ce){throw new Error("No Web Audio API support")}const H=function(e){this.context=e,this.bufferList={},this.playingSounds={},this.merger=this.context.createChannelMerger(1),this.merger.connect(this.context.destination)};H.prototype={addSound:function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer";var s=this;n.onload=function(){s.context.decodeAudioData(n.response,function(t){if(!t)throw new Error(`Error decoding file data: ${e}`);s.bufferList[e]=t}),t&&t()},n.onerror=function(){throw new Error("BufferLoader: XHR error")},n.send()},stopSoundWithUrl:function(e,t){if(this.playingSounds.hasOwnProperty(e))for(var n in this.playingSounds[e])this.playingSounds[e].hasOwnProperty(n)&&this.playingSounds[e][n].stop(t)}};const Y=new H(window.audioContext);window.webAudioAPISoundManager=Y;const X=function(e,t){this.url=e,window.webAudioAPISoundManager=window.webAudioAPISoundManager||new H(window.audioContext),this.manager=window.webAudioAPISoundManager,this.manager.addSound(this.url,t)};X.prototype={play:function(e){var t=this.manager.bufferList[this.url];for(var n in this.settings={time:0,loop:!1,volume:.5},e)e.hasOwnProperty(n)&&(this.settings[n]=e[n]);if("undefined"!==typeof t){var s=this.makeSource(t);s.loop=this.settings.loop,s.start(this.settings.time),this.manager.playingSounds.hasOwnProperty(this.url)||(this.manager.playingSounds[this.url]=[]),this.manager.playingSounds[this.url].push(s)}},stop:function({time:e=0}){this.manager.stopSoundWithUrl(this.url,e)},makeSource:function(e){var t=this.manager.context.createBufferSource(),n=this.manager.context.createGain();return n.gain.value=this.settings.volume,t.buffer=e,t.connect(n),this.source=t,n.connect(this.manager.merger),t}};const J="/loops/",V=["Lecwd04-loops-r1-edited.wav","Inspo01-loops-r2-edited.wav","Brindisi-loops-r3-edited.wav","734-loops-r4-edited.wav","Lecwd04-loops-b1-edited.wav","Groovr02-loops-b2-edited.wav","Brindisi-loops-b3-edited.wav","Fastfood-loops-b4-edited.wav","Lecwd04-loops-s1-edited.wav","Groovr02-loops-s2-edited.wav","Brindisi-loops-s3-edited.wav","Fastfood-loops-s4-edited.wav","Lecwd04-loops-d1-edited.wav","Groovr02-loops-d2-edited.wav","Brindisi-loops-d3-edited.wav","Fastfood-loops-d4-edited.wav"],K=["Rhythm 1","Rhythm 2","Rhythm 3","Rhythm 4","Bass 1","Bass 2","Bass 3","Bass 4","Synth 1","Synth 2","Synth 3","Synth 4","Drum 1","Drum 2","Drum 3","Drum 4"],Z=["r","b","s","d"];function ee(e){return new Promise(t=>{new X(e,t)})}function te(e,t,n){return new Promise(async s=>{const i=`${J}${e}`;await ee(i),s({filename:e,name:n,type:Z[t],playing:!1})})}async function ne(){let e=-1;const t=await Promise.all(V.map((t,n)=>{return n%4===0&&e++,te(t,e,K[n])}));return t}function se(e){return new _["a"](e,Object.assign({},k.a))}let ie=null;var re={name:"Looper",data(){return{loaded:!1,counter:0,sources:[],showSources:[],startQueue:[],endQueue:[],stopAnimating:!1,baseUrl:"/loops/",timerWorker:null,sampleStore:{},lookahead:25,isPlaying:!1,current16thNote:null,tempo:130,scheduleAheadTime:.1,nextNoteTime:0}},components:{Background:W,Sample:F},computed:{playing(){const e=[];return this.sources.forEach((t,n)=>{if(!t.playing)return!1;e.push({...t,index:n})}),e}},async created(){function e(e){return new Promise(t=>setTimeout(t,e))}ie=Y.context,this.timerWorker=new Worker("/metronome-worker.js"),this.timerWorker.onmessage=e=>{"tick"===e.data&&this.scheduler()},this.timerWorker.postMessage({interval:this.lookahead}),this.analyser=se({audioContext:Y.context,source:Y.merger,bufferSize:256,featureExtractors:["rms","energy","buffer"]}),Y.bufferList={},this.$set(this,"sources",await ne()),this.loaded=!0;for(let t=0;t<this.sources.length;++t)this.showSources.push(this.sources[t]),await e(100);window.toggleAnimating=()=>{this.stopAnimating=!this.stopAnimating}},beforeDestroy(){for(let e=0;e<16;e+=1)Y.stopSoundWithUrl(`${this.baseUrl}${this.sources[e].filename}`);this.timerWorker.postMessage("stop"),this.timerWorker.terminate()},methods:{startInterval(){return this.isPlaying=!this.isPlaying,this.isPlaying?(this.current16thNote=0,this.nextNoteTime=ie.currentTime,this.timerWorker.postMessage("start"),"stop"):(this.timerWorker.postMessage("stop"),"play")},scheduler(){while(this.nextNoteTime<ie.currentTime+this.scheduleAheadTime)this.scheduleNote(this.current16thNote,this.nextNoteTime),this.nextNote()},scheduleNote(e,t){const{startQueue:n,endQueue:s}=this;if(e%64===0){for(let e=0;e<s.length;++e)this.stopSample(s[e]);for(let e=0;e<this.playing.length;++e)this.startSample(this.playing[e].index,t);for(let e=0;e<n.length;++e)this.startSample(n[e],t);n.splice(0,n.length),s.splice(0,s.length)}e%4===0&&$.$emit("loop")},nextNote(){const e=60/this.tempo;this.nextNoteTime+=.25*e,this.current16thNote++,64===this.current16thNote&&(this.current16thNote=0)},queueSample(e){const t=e.filename,{endQueue:n,startQueue:s}=this,i=this.sources.findIndex(e=>e.filename===t);if(this.playing.length||this.startInterval(),i>-1){const e=this.sources[i].type,t=this.playing.find(t=>t.type===e),r=s.reduce((t,n,s)=>{return this.sources[n].type===e&&t.push(s),t},[]),a=!!r.length;s.indexOf(i)>-1?s.splice(s.indexOf(i),1):this.sources[i].playing&&n.indexOf(i)>-1?(n.splice(n.indexOf(i),1),a&&s.splice(s.indexOf(i),1)):this.sources[i].playing?n.push(i):(t&&n.push(t.index),a&&r.forEach(e=>{s.splice(e,1)}),s.push(i))}},startSample(e,t){const{baseUrl:n}=this,s=this.sources[e].filename;this.sources[e].playing=!0;const i=new X(`${n}${s}`);i.play({time:t}),this.sources[e].analyser=this.analyser,this.sampleStore[s]&&delete this.sampleStore[s],this.sampleStore[s]=i},stopSample(e){this.sources[e].playing=!1}}},ae=re,oe=(n("ce6d"),Object(l["a"])(ae,v,x,!1,null,"7f5bf3b3",null)),ce=oe.exports,le={components:{Looper:ce}},ue=le,de=Object(l["a"])(ue,w,b,!1,null,null,null),he=de.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{staticClass:"symbol-switch",on:{click:e.switchSymbolDisplay}},[e._v("\n    "+e._s(this.symbols?"Latin":"IPA")+"\n  ")]),n("div",{on:{touchmove:e.touchMoveHandler,touchend:e.clearCurrentIndex,mouseleave:e.clearCurrentIndex}},e._l(e.geseap,function(t,s){return n("span",{key:s,staticClass:"symbol",class:{hovered:t.index===e.currentIndex},attrs:{"data-symbol":t.index},on:{pointerenter:function(n){t.type===e.INTERACTION_TYPE&&e.playSymbol(t.index)}}},[e._v(e._s(t.character))])}),0)])},me=[];const fe="/aligned-pronunciation/",ge=["0_G.wav","1_E.wav","2_SC.wav","3_E.wav","4_A.wav","5_P.wav"],ye=Symbol(),we=Symbol();var be={data(){return{INTERACTION_TYPE:ye,PUNCTUATION_TYPE:we,latin:[{type:ye,character:"G",index:0},{type:ye,character:"E",index:1},{type:ye,character:"SC",index:2},{type:ye,character:"E",index:3},{type:ye,character:"A",index:4},{type:ye,character:"P",index:5}],ipa:[{type:we,character:"/"},{type:ye,character:"j",index:0},{type:ye,character:"e",index:1},{type:we,character:"ˈ"},{type:ye,character:"ʃ",index:2},{type:ye,character:"æ",index:3},{type:ye,character:"ɑ",index:4},{type:ye,character:"p",index:5},{type:we,character:"/"}],symbols:0,sample:null,lastIndex:-1,currentIndex:-1}},computed:{geseap(){return this.symbols?this.ipa:this.latin}},async created(){function e(e){new X(e)}await Promise.all(ge.map(t=>e(`${fe}${t}`)))},methods:{switchSymbolDisplay(){this.symbols=!this.symbols},playSymbol(e,t){if(t&&this.lastIndex===e)return;this.lastIndex=e,this.stopSample();const n=new X(`${fe}${ge[e]}`);this.sample=n,n.play({time:0,loop:!0}),this.currentIndex=e},touchMoveHandler(e){const{clientX:t,clientY:n}=e.touches[0],s=document.elementFromPoint(t,n);let i=s.dataset.symbol;void 0!==i&&(i=Number(i),i!==this.lastIndex&&(this.playSymbol(i,!0),this.lastIndex=i))},clearCurrentIndex(){this.currentIndex=-1,this.stopSample()},stopSample(){this.sample&&this.sample.stop({time:0})}}},ve=be,xe=(n("2cc5"),Object(l["a"])(ve,pe,me,!1,null,"ff682c52",null)),Se=xe.exports,ke=[{path:"/",component:Se},{path:"/prime16",component:he},{path:"/sonic-desert",component:y}];const _e=new i["a"]({mode:"history",routes:ke});s["a"].config.productionTip=!1,s["a"].use(i["a"]),new s["a"]({render:e=>e(d),router:_e}).$mount("#app")},"5f0e":function(e,t,n){},"64a9":function(e,t,n){},"7a11":function(e,t,n){e.exports=n.p+"media/track.d0c0a84d.mp3"},8016:function(e,t,n){},"803a":function(e,t,n){},"810b":function(e,t,n){},"97f4":function(e,t,n){e.exports=n.p+"media/track.148d30d3.ogg"},a817:function(e,t,n){e.exports=n.p+"media/wind.63cf2845.mp3"},a8a9:function(e,t,n){"use strict";var s=n("09a2"),i=n.n(s);i.a},ce6d:function(e,t,n){"use strict";var s=n("8016"),i=n.n(s);i.a},e81c:function(e,t,n){e.exports=n.p+"media/background.dec00ea1.mp4"}});
//# sourceMappingURL=app.a8108f9f.js.map